I"Ž/<h1 id="a-picture-in-a-figure">A Picture in a Figure</h1>

<p>The picture below is a <em>responsive</em> image made possible by the methods described <a href="/sample/2018/05/19/picture-element.html">here</a>.</p>

<p>The only difference is that this picture has a nicely formatted caption.</p>

<figure>
  <picture>
    <source media="(max-width: 576px)" srcset="
      /assets/images/responsive/sora-sagano-639761-unsplash-sm-1x.webp 1x,
      /assets/images/responsive/sora-sagano-639761-unsplash-sm-2x.webp 2x
    " type="image/webp" />
    <source media="(max-width: 576px)" srcset="
      /assets/images/responsive/sora-sagano-639761-unsplash-sm-1x.jpg 1x,
      /assets/images/responsive/sora-sagano-639761-unsplash-sm-2x.jpg 2x
    " type="image/jpeg" />
    <source media="(max-width: 768px)" srcset="
    /assets/images/responsive/sora-sagano-639761-unsplash-md-1x.webp 1x,
    /assets/images/responsive/sora-sagano-639761-unsplash-md-2x.webp 2x
    " type="image/webp" />
    <source media="(max-width: 768px)" srcset="
    /assets/images/responsive/sora-sagano-639761-unsplash-md-1x.jpg 1x,
    /assets/images/responsive/sora-sagano-639761-unsplash-md-2x.jpg 2x
    " type="image/jpeg" />
    <source media="(min-width: 769px)" srcset="
    /assets/images/responsive/sora-sagano-639761-unsplash-xl-1x.webp 1x,
    /assets/images/responsive/sora-sagano-639761-unsplash-xl-2x.webp 2x
    " type="image/webp" />
    <source media="(min-width: 769px)" srcset="
    /assets/images/responsive/sora-sagano-639761-unsplash-xl-1x.jpg 1x,
    /assets/images/responsive/sora-sagano-639761-unsplash-xl-2x.jpg 2x
    " type="image/jpeg" />
    <img srcset="
        /assets/images/responsive/sora-sagano-639761-unsplash-sm-1x.jpg 576w,
        /assets/images/responsive/sora-sagano-639761-unsplash-md-1x.jpg 768w,
        /assets/images/responsive/sora-sagano-639761-unsplash-xl-1x.jpg 1440w" src="/assets/images/responsive/sora-sagano-639761-unsplash-md-1x.jpg" alt="Figure Elements" class="figure-img rounded" type="image/jpeg" />
  </picture><figcaption class="figure-caption text-right pr-2">
    Photo by
    <a href="https://unsplash.com/photos/8sOZJ8JF0S8">Sora Sagano</a> on
    <a href="https://unsplash.com/@s_sagano">Unsplash</a>
  </figcaption></figure>

<p>To insert a picture like the above, use the following Liquid tag in your post or page:</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>figure.html<span class="w"> </span><span class="p">%}</span> 
</code></pre></div></div>

<p>The above will insert the <code class="language-plaintext highlighter-rouge">_figure.html</code> file as an include, which relies on <em>front matter</em> for its variables to display anything from a simple caption to a caption with links for the photographerâ€™s website and/or the imageâ€™s source.</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Figure Elements</span>
<span class="na">description</span><span class="pi">:</span>  <span class="s">Responsive images with captions</span>
<span class="na">category</span><span class="pi">:</span> <span class="s">Sample</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">sora-sagano-639761-unsplash.jpg</span>
<span class="na">image-caption</span><span class="pi">:</span>
<span class="na">image-source</span><span class="pi">:</span> <span class="s">Unsplash</span>
<span class="na">image-url</span><span class="pi">:</span> <span class="s">https://unsplash.com/photos/8sOZJ8JF0S8</span>
<span class="na">photographer</span><span class="pi">:</span> <span class="s">Sora Sagano</span>
<span class="na">photographer-url</span><span class="pi">:</span> <span class="s">https://unsplash.com/@s_sagano</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>Iâ€™ve tried to make the logic as simple as possible, but it can make your head explode if you think about it too much.</p>

<p>The logic goes a little somethinâ€™ like this (but maybe not exactly, as itâ€™s really hard to write it all in plain English):</p>

<ol>
  <li>If thereâ€™s a plain text caption, <code class="language-plaintext highlighter-rouge">image-caption</code>, use that</li>
  <li>If thereâ€™s a no <code class="language-plaintext highlighter-rouge">image-caption</code>, but you have <code class="language-plaintext highlighter-rouge">photographer</code>, <code class="language-plaintext highlighter-rouge">photographer-url</code>, <code class="language-plaintext highlighter-rouge">image-source</code>, and <code class="language-plaintext highlighter-rouge">image-url</code>, use them with links</li>
  <li>If thereâ€™s a no <code class="language-plaintext highlighter-rouge">image-caption</code> and no <code class="language-plaintext highlighter-rouge">image-url</code>; but you have <code class="language-plaintext highlighter-rouge">photographer</code>, <code class="language-plaintext highlighter-rouge">photographer-url</code>, and <code class="language-plaintext highlighter-rouge">image-source</code>, use them with links</li>
  <li>If thereâ€™s a no <code class="language-plaintext highlighter-rouge">image-caption</code>, no <code class="language-plaintext highlighter-rouge">image-source</code>, and no <code class="language-plaintext highlighter-rouge">image-url</code>; but you have <code class="language-plaintext highlighter-rouge">photographer</code> and <code class="language-plaintext highlighter-rouge">photographer-url</code> use them with a link</li>
  <li>If you only have <code class="language-plaintext highlighter-rouge">image-source</code> and <code class="language-plaintext highlighter-rouge">image-url</code>, use those with a link</li>
  <li>Anything else gets a blank caption (I think)</li>
</ol>

<p>:flushed: The code for the <code class="language-plaintext highlighter-rouge">figure.html</code> include file is here for reference:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{%- if page.image -%}
{%- assign f = page.image | split: '.' %} {% assign img_path = site.baseurl | append: "/assets/images/responsive/" -%}
<span class="nt">&lt;figure&gt;</span>
  <span class="nt">&lt;picture&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(max-width: 576px)"</span> <span class="na">srcset=</span><span class="s">"
      {{ img_path | append: f[0] | append: relative_url }}-sm-1x.webp 1x,
      {{ img_path | append: f[0] | append: relative_url }}-sm-2x.webp 2x
    "</span> <span class="na">type=</span><span class="s">"image/webp"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(max-width: 576px)"</span> <span class="na">srcset=</span><span class="s">"
      {{ img_path | append: f[0] | append: relative_url }}-sm-1x.jpg 1x,
      {{ img_path | append: f[0] | append: relative_url }}-sm-2x.jpg 2x
    "</span> <span class="na">type=</span><span class="s">"image/jpeg"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(max-width: 768px)"</span> <span class="na">srcset=</span><span class="s">"
    {{ img_path | append: f[0] | append: relative_url }}-md-1x.webp 1x,
    {{ img_path | append: f[0] | append: relative_url }}-md-2x.webp 2x
    "</span> <span class="na">type=</span><span class="s">"image/webp"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(max-width: 768px)"</span> <span class="na">srcset=</span><span class="s">"
    {{ img_path | append: f[0] | append: relative_url }}-md-1x.jpg 1x,
    {{ img_path | append: f[0] | append: relative_url }}-md-2x.jpg 2x
    "</span> <span class="na">type=</span><span class="s">"image/jpeg"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(min-width: 769px)"</span> <span class="na">srcset=</span><span class="s">"
    {{ img_path | append: f[0] | append: relative_url }}-xl-1x.webp 1x,
    {{ img_path | append: f[0] | append: relative_url }}-xl-2x.webp 2x
    "</span> <span class="na">type=</span><span class="s">"image/webp"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">media=</span><span class="s">"(min-width: 769px)"</span> <span class="na">srcset=</span><span class="s">"
    {{ img_path | append: f[0] | append: relative_url }}-xl-1x.jpg 1x,
    {{ img_path | append: f[0] | append: relative_url }}-xl-2x.jpg 2x
    "</span> <span class="na">type=</span><span class="s">"image/jpeg"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">srcset=</span><span class="s">"
        {{ img_path | append: f[0] | append: relative_url }}-sm-1x.jpg 576w,
        {{ img_path | append: f[0] | append: relative_url }}-md-1x.jpg 768w,
        {{ img_path | append: f[0] | append: relative_url }}-xl-1x.jpg 1440w"</span> <span class="na">src=</span><span class="s">"{{ img_path | append: f[0] | append: relative_url }}-md-1x.jpg"</span>
      <span class="na">alt=</span><span class="s">"{{ page.title }}"</span> <span class="na">class=</span><span class="s">"figure-img rounded"</span> <span class="na">type=</span><span class="s">"image/jpeg"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/picture&gt;</span>
  {%- if page.image-caption -%}
  <span class="nt">&lt;figcaption</span> <span class="na">class=</span><span class="s">"figure-caption text-right pr-2"</span><span class="nt">&gt;</span>{{page.image-caption}}<span class="nt">&lt;/figcaption&gt;</span>
  {%- elsif page.photographer and page.photographer-url and page.image-source and page.image-url -%}
  <span class="nt">&lt;figcaption</span> <span class="na">class=</span><span class="s">"figure-caption text-right pr-2"</span><span class="nt">&gt;</span>
    Photo by
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ page.image-url }}"</span><span class="nt">&gt;</span>{{ page.photographer }}<span class="nt">&lt;/a&gt;</span> on
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ page.photographer-url }}"</span><span class="nt">&gt;</span>{{ page.image-source }}<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/figcaption&gt;</span>
  {%- elsif page.photographer and page.photographer-url and page.image-source -%}
  <span class="nt">&lt;figcaption</span> <span class="na">class=</span><span class="s">"figure-caption text-right pr-2"</span><span class="nt">&gt;</span>
    Photo by
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ page.image-url }}"</span><span class="nt">&gt;</span>{{ page.photographer }}<span class="nt">&lt;/a&gt;</span> on {{ page.image-source }}
  <span class="nt">&lt;/figcaption&gt;</span>
  {%- elsif page.photographer and page.photographer-url -%}
  <span class="nt">&lt;figcaption</span> <span class="na">class=</span><span class="s">"figure-caption text-right pr-2"</span><span class="nt">&gt;</span>
    Photo by
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ page.photographer-url }}"</span><span class="nt">&gt;</span>{{ page.photographer }}<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/figcaption&gt;</span>
  {%- elsif page.image-source and page.image-url -%}
  <span class="nt">&lt;figcaption</span> <span class="na">class=</span><span class="s">"figure-caption text-right pr-2"</span><span class="nt">&gt;</span>
    Photo from
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ page.image-url }}"</span><span class="nt">&gt;</span>{{ page.image-source }}<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/figcaption&gt;</span>
  {%- endif -%}
<span class="nt">&lt;/figure&gt;</span>
{%- endif -%}
</code></pre></div></div>
:ET